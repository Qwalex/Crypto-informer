@echo off
echo üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏–∑–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω–æ–≥–æ —Ä—ã–Ω–∫–∞...

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Docker
where docker >nul 2>nul
if %errorlevel% neq 0 (
    echo ‚ùå Docker –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker.
    pause
    exit /b 1
)

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ .env —Ñ–∞–π–ª–∞
if not exist .env (
    echo ‚ùå –§–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ .env.example –≤ .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.
    pause
    exit /b 1
)

:: –ó–∞–ø—É—Å–∫–∞–µ–º Python —Å–µ—Ä–≤–∏—Å
echo üêç –ó–∞–ø—É—Å–∫ Python —Å–µ—Ä–≤–∏—Å–∞...
docker-compose up -d

:: –ñ–¥–µ–º –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
echo ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ Python —Å–µ—Ä–≤–∏—Å–∞...
timeout /t 10 /nobreak >nul

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å Python —Å–µ—Ä–≤–∏—Å–∞
echo üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Python —Å–µ—Ä–≤–∏—Å–∞...
curl -f http://localhost:8000/health >nul 2>nul
if %errorlevel% equ 0 (
    echo ‚úÖ Python —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω —É—Å–ø–µ—à–Ω–æ
) else (
    echo ‚ö†Ô∏è Python —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–æ –±–æ—Ç –ø–æ–ø—Ä–æ–±—É–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –Ω–µ–≥–æ
)

:: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Node.js –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
if not exist node_modules (
    echo üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...
    npm install
)

:: –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º TypeScript
echo üî® –ö–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript...
npm run build

:: –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
echo ü§ñ –ó–∞–ø—É—Å–∫ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω–æ–≥–æ –±–æ—Ç–∞...
npm start

pause
